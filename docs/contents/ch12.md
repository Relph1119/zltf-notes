# 第14章 分布式架构

## 1 分布式系统的架构演进

1. 分布式系统的复杂性：增大系统容量、加强系统可用性。
2. 开发、维护和使用SOA遵循的基本原则：
    - 可重用、粒度合适、模块化、可组合、构件化及有互操作性。
    - 符合通用或行业标准。
    - 能明确区分服务的识别和分类、提供和发布、监控和跟踪。

## 2 核心使命与关键技术

**核心使命：**
- 提高系统性能：缓冲系统、负载均衡系统、异步调用、数据镜像、数据分区
- 提高系统稳定性：服务拆分、服务冗余、限流降级、高可用架构、高可用运维

**关键技术：**
- 服务治理：对服务之间的依赖关系、服务调用链和关键服务的梳理，对性能和可用性的管理。
- 软件架构管理：整体服务形成的架构需要具备架构版本管理、整体架构的生命周期管理，服务编排、聚合和事务处理等调度功能。
- DevOps：环境构建、持续集成和持续部署。
- 资源调度管理：对云计算基础架构层的计算、存储、网络等资源进行调度、隔离和管理。
- 系统架构监控：覆盖应用层、中间件层和基础层。
- 流量控制：负载均衡、服务路由、熔断、降级和限流等调度，以及灰度发布等功能。

## 3 CAP理论

- 【C】一致性：每个服务节点的每次读取，要么获得最新写入的数据，要么获得一个错误。
- 【A】可用性：每个服务节点的每次请求都能获得一个（非错误）响应，但不保证返回的是最新写入的数据。
- 【P】分区容错性：尽管不定量的消息在节点间的网络传输中丢失（或延迟），系统仍然可以继续运行。

## 4 PaaS平台

**总体架构：**
- 调度层：管理PaaS的自动化和分布式模块对于高可用、高性能实现的调度。
- 能力服务层：向用户提供PaaS的服务和能力。
- 流量调度：负责与流量调度相关的高并发管理。
- 运营管理：包括软件资源库、软件接入、认证和开放平台。
- 运维管理：负责与DevOps相关的管理。

