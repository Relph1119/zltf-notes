# 第13章 软件开发与架构设计的原则

## 1 软件开发的15条原则

1. 不重复原则（DRY原则）
2. 大道至简原则（KISS原则）
3. 面向接口而非实现原则
4. 命令查询分离原则
    - 查询：当一个方法通过返回一个值来响应一个请求的时候。
    - 命令：当一个方法要改变对象状态的时候。
5. 按需设计原则
6. 迪米特法则（最小知识原则）
7. 面向对象SOLID原则
   - 单一职责原则：一个类应该只承担一个职责，并且应当把这个职责尽可能地履行好，而且它所承担的职责只应有一个引起变化的原因。
   - 开闭原则：模块应该可扩展但不可修改。
   - 里氏替换原则：子类型必须能够替换其父类型。
   - 接口隔离原则：在接口中而不是在类中实现功能，而且使用多个专用的接口比使用单一的总接口更好。
   - 依赖倒置原则：高层模块不应该依赖于低层模块的实现，而应该依赖于高层抽象。
8. 共同封闭原则：一个包中所有的类应该对同一个类型的变化关闭。
9. 共同重用原则：包中所有类应一起被重用。帮助我们决定哪些类应该被放在同一个包中。
10. “好莱坞”原则：所有组件都是被动的，所有组件的初始化和调用都由容器负责。
11. 高内聚低耦合原则
12. 约定优于配置原则
13. 关注点分离原则：标准化可以实现关注点分离，制定一套共同遵守的标准，将使用者的行为统一起来，使其不再担心出现很多种不同的实现。
14. 契约式设计原则：期望的是什么，要保证的是什么，要保持的是什么。
15. 无环依赖原则：打破环状结构的方法：创建新的包、使用依赖倒置原则和接口隔离原则。

## 2 系统架构的11条原则

1. 关注收益而不是技术
   - 降低技术门槛，加快整个团队的开发流程。
   - 让整个系统运行得更加稳定。
   - 通过简化和自动化来降低成本。
2. 以服务和API为视角
3. 选择主流和成熟得技术
4. 完备性比性能重要
   - 优先使用科学、严谨得技术模型，只以不严谨的模型作为补充。
   - 对于性能问题，解决方案和可裁去的措施有很多。
5. 制定并遵循标准规范
6. 重视可扩展性和可维护性
7. 对控制逻辑全面收口
   - 流量收口：包括南北向和东西向的流量调度，通过流量网关、开发框架或服务网格等技术实现。
   - 服务治理收口：包括服务发现、健康检查、配置管理、事务、事件、重试、熔断、限流等，通过开发框架SDK或服务网格等技术实现。
   - 监控数据收口：包括日志、指标、调用链等，通过主流探针，后台的数据清洗和数据存储来完成。
   - 资源调度与应用部署收口：包括计算、网络和存储，通过容器化的方案来完成。
   - 中间件收口：包括数据库、消息、缓存、服务发现、网关等。建立一个共享的云化中间件资源池。
8. 不要迁就技术债务
9. 不要依赖经验
10. 提防与应对“X-Y”问题
11. 对新技术激进胜于保守
